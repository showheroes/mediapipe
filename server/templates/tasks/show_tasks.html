{% extends '../main.html' %}
{% block content %}
	{% import os %}
	<table class="table">
		<thead>
			<tr>
				<td>Task ID</td>
				<td>Task name</td>
				<td>Source video</td>
				<td>Status</td>
				<td>Monitor</td>
				<td>Download</td>
				<td>Restart</td>
				<td>Captions</td>
			</tr>
		</thead>
		<tbody>
			{% for task in tasks %}
				<tr>
					<td>{{ task['task_id'] }}</td>
					<td>{{ task['task_name'] }}</td>
					<td>{{ task['input_file_name'] }}</td>
					<td>{{ task['status'] }}</td>
					<td><a href="{{ deploy_path }}/video/flip/ui/tasks/{{task['task_id']}}">Show progress</a></td>
					<td>
						{% if 'success' in task['status'] %}
							<a href="{{ deploy_path }}/video/flip/ui/tasks/{{ task['task_id']}}?download">Download</a>
						{% else %}
							N/A
						{% end %}
					</td>
					<td>
						{% if 'stopped' in task['status'] %}
							<a href="{{ deploy_path }}/video/flip/ui/tasks/{{task['task_id']}}/restart">Restart task</a>
						{% end %}
					</td>
					<td>
						<a href="{{ deploy_path }}/video/flip/ui/tasks/{{ task['task_id'] }}/captions/create">Add captions</a>
						{% if 'captions' in task %}
							<table class="table">
								<tbody>
									{% for lang in task['captions'] %}
										<tr>
											<td>
												<a href="{{ deploy_path }}/video/flip/ui/tasks/{{ task['task_id'] }}/play?language={{ lang }}">Play with {{ task['captions'][lang]['captions_label'] }} captions</a>
											</td>
										</tr>
									{% end %}
								</tbody>
							</table>
						{% end %}
					</td>
				</tr>
			{% end %}
		</tbody>
	</table>
{% end %}
